# Gu√≠a de Contribuci√≥n - D&D Combat Grid ü§ù

¬°Gracias por tu inter√©s en contribuir al proyecto D&D Combat Grid! Esta gu√≠a te ayudar√° a empezar y entender c√≥mo puedes aportar al desarrollo.

## üìã Tabla de Contenidos

- [C√≥digo de Conducta](#c√≥digo-de-conducta)
- [C√≥mo Contribuir](#c√≥mo-contribuir)
- [Configuraci√≥n del Entorno](#configuraci√≥n-del-entorno)
- [Proceso de Desarrollo](#proceso-de-desarrollo)
- [Est√°ndares de C√≥digo](#est√°ndares-de-c√≥digo)
- [Testing](#testing)
- [Documentaci√≥n](#documentaci√≥n)
- [Reportar Bugs](#reportar-bugs)
- [Solicitar Features](#solicitar-features)

## ü§ù C√≥digo de Conducta

### Nuestro Compromiso

Nos comprometemos a hacer de la participaci√≥n en nuestro proyecto una experiencia libre de acoso para todos, independientemente de:

- Edad, tama√±o corporal, discapacidad visible o invisible
- Etnia, caracter√≠sticas sexuales, identidad y expresi√≥n de g√©nero
- Nivel de experiencia, educaci√≥n, estatus socioecon√≥mico
- Nacionalidad, apariencia personal, raza, religi√≥n
- Identidad y orientaci√≥n sexual

### Comportamiento Esperado

- **S√© respetuoso**: Trata a todos con respeto y consideraci√≥n
- **S√© constructivo**: Proporciona feedback constructivo y √∫til
- **S√© colaborativo**: Trabaja en equipo y ayuda a otros
- **S√© paciente**: Entiende que todos tienen diferentes niveles de experiencia

### Comportamiento Inaceptable

- Lenguaje o im√°genes sexualizadas
- Comentarios despectivos, insultos o ataques personales
- Acoso p√∫blico o privado
- Publicar informaci√≥n privada de otros sin permiso
- Cualquier conducta que sea inapropiada en un entorno profesional

## üöÄ C√≥mo Contribuir

### Tipos de Contribuciones

1. **üêõ Reportar Bugs**
   - Encuentra y reporta errores
   - Proporciona informaci√≥n detallada para reproducir

2. **‚ú® Nuevas Funcionalidades**
   - Propone nuevas caracter√≠sticas
   - Implementa features del roadmap

3. **üìö Documentaci√≥n**
   - Mejora la documentaci√≥n existente
   - Traduce documentaci√≥n
   - Crea tutoriales y gu√≠as

4. **üé® Dise√±o y UX**
   - Mejora la interfaz de usuario
   - Optimiza la experiencia de usuario
   - Crea assets visuales

5. **‚ö° Performance**
   - Optimiza el rendimiento
   - Reduce el tama√±o del bundle
   - Mejora la accesibilidad

## üõ†Ô∏è Configuraci√≥n del Entorno

### Prerrequisitos

```bash
# Versiones requeridas
Node.js >= 18.0.0
npm >= 8.0.0
Git >= 2.0.0
```

### Setup Inicial

1. **Fork del Repositorio**
   ```bash
   # En GitHub, haz click en "Fork"
   # Luego clona tu fork
   git clone https://github.com/TU_USERNAME/project-main.git
   cd project-main
   ```

2. **Configurar Remote Upstream**
   ```bash
   git remote add upstream https://github.com/ORIGINAL_OWNER/project-main.git
   git remote -v
   ```

3. **Instalar Dependencias**
   ```bash
   npm install
   ```

4. **Verificar Instalaci√≥n**
   ```bash
   npm run dev
   # Deber√≠a abrir http://localhost:5173
   ```

### Herramientas de Desarrollo

```bash
# Scripts disponibles
npm run dev          # Servidor de desarrollo
npm run build        # Build de producci√≥n
npm run preview      # Preview del build
npm run lint         # Linting
npm run lint:fix     # Fix autom√°tico de linting
npm run type-check   # Verificaci√≥n de tipos TypeScript
```

## üîÑ Proceso de Desarrollo

### Workflow de Git

1. **Sincronizar con Upstream**
   ```bash
   git checkout main
   git fetch upstream
   git merge upstream/main
   git push origin main
   ```

2. **Crear Rama de Feature**
   ```bash
   # Nomenclatura: tipo/descripcion-corta
   git checkout -b feature/token-animations
   git checkout -b bugfix/fog-rendering-issue
   git checkout -b docs/api-documentation
   ```

3. **Desarrollar y Commitear**
   ```bash
   # Hacer cambios...
   git add .
   git commit -m "feat: add token animation system"
   ```

4. **Push y Pull Request**
   ```bash
   git push origin feature/token-animations
   # Crear PR en GitHub
   ```

### Convenciones de Commits

Usamos [Conventional Commits](https://www.conventionalcommits.org/):

```bash
# Formato
<tipo>[scope opcional]: <descripci√≥n>

# Tipos
feat:     # Nueva funcionalidad
fix:      # Bug fix
docs:     # Documentaci√≥n
style:    # Formateo, punto y coma faltante, etc.
refactor: # Refactoring de c√≥digo
perf:     # Mejora de performance
test:     # Agregar tests
chore:    # Tareas de mantenimiento

# Ejemplos
feat(tokens): add drag and drop functionality
fix(fog): resolve rendering issue with large maps
docs(readme): update installation instructions
style(grid): improve component spacing
refactor(api): extract rate limiting logic
perf(canvas): optimize drawing performance
test(tokens): add unit tests for token creation
chore(deps): update dependencies
```

### Branching Strategy

```
main
‚îú‚îÄ‚îÄ feature/nueva-funcionalidad
‚îú‚îÄ‚îÄ bugfix/corregir-error
‚îú‚îÄ‚îÄ docs/documentacion
‚îî‚îÄ‚îÄ hotfix/arreglo-urgente
```

## üìù Est√°ndares de C√≥digo

### TypeScript

```typescript
// ‚úÖ Buenas pr√°cticas
interface TokenProps {
  id: string;
  type: 'ally' | 'enemy' | 'boss';
  position: { x: number; y: number };
  onMove?: (newPosition: { x: number; y: number }) => void;
}

const Token: React.FC<TokenProps> = ({ 
  id, 
  type, 
  position, 
  onMove 
}) => {
  const handleMove = useCallback((newPos: { x: number; y: number }) => {
    onMove?.(newPos);
  }, [onMove]);
  
  return (
    <div 
      className={`token token--${type}`}
      style={{ 
        transform: `translate(${position.x}px, ${position.y}px)` 
      }}
    >
      {/* Contenido del token */}
    </div>
  );
};

// ‚ùå Evitar
const BadToken = (props: any) => {
  return <div style={{left: props.x + 'px'}}>{props.children}</div>;
};
```

### React Components

```typescript
// ‚úÖ Estructura recomendada
const ComponentName: React.FC<ComponentProps> = ({
  // Destructuring de props
  prop1,
  prop2,
  onAction,
}) => {
  // 1. Estados locales
  const [localState, setLocalState] = useState(initialValue);
  
  // 2. Refs
  const elementRef = useRef<HTMLDivElement>(null);
  
  // 3. Efectos
  useEffect(() => {
    // L√≥gica de efectos
  }, [dependencies]);
  
  // 4. Handlers (con useCallback si es necesario)
  const handleAction = useCallback(() => {
    // L√≥gica del handler
    onAction?.();
  }, [onAction]);
  
  // 5. Render helpers
  const renderContent = () => {
    return <div>Content</div>;
  };
  
  // 6. Early returns
  if (!prop1) {
    return <div>Loading...</div>;
  }
  
  // 7. Main render
  return (
    <div className="component-name">
      {renderContent()}
    </div>
  );
};

// Exportar con memo si es necesario
export default React.memo(ComponentName);
```

### CSS/Tailwind

```typescript
// ‚úÖ Clases organizadas
const className = [
  // Layout
  'flex items-center justify-between',
  // Spacing
  'p-4 m-2',
  // Sizing
  'w-full h-auto',
  // Colors
  'bg-gray-800 text-white',
  // States
  'hover:bg-gray-700 focus:outline-none',
  // Responsive
  'md:p-6 lg:p-8',
].join(' ');

// ‚úÖ Componentes condicionales
const buttonClass = `
  px-4 py-2 rounded font-medium transition-colors
  ${variant === 'primary' 
    ? 'bg-blue-600 hover:bg-blue-700 text-white' 
    : 'bg-gray-600 hover:bg-gray-700 text-gray-200'
  }
  ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}
`;
```

### Naming Conventions

```typescript
// Componentes: PascalCase
const TokenManager = () => {};
const GridComponent = () => {};

// Funciones: camelCase
const handleTokenMove = () => {};
const calculateDistance = () => {};

// Constantes: UPPER_SNAKE_CASE
const MAX_TOKENS = 100;
const DEFAULT_GRID_SIZE = 40;

// Interfaces: PascalCase con sufijo
interface TokenProps {}
interface GridState {}
interface ApiResponse {}

// Tipos: PascalCase
type TokenType = 'ally' | 'enemy' | 'boss';
type GridPosition = { x: number; y: number };
```

## üß™ Testing

### Estructura de Tests

```
__tests__/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ GridComponent.test.tsx
‚îÇ   ‚îú‚îÄ‚îÄ TokenManager.test.tsx
‚îÇ   ‚îî‚îÄ‚îÄ TokenEditModal.test.tsx
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ gameLogic.test.ts
‚îÇ   ‚îî‚îÄ‚îÄ apiHelpers.test.ts
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îî‚îÄ‚îÄ useDragAndDrop.test.ts
‚îî‚îÄ‚îÄ setup.ts
```

### Escribir Tests

```typescript
// __tests__/components/Token.test.tsx
import { render, screen, fireEvent } from '@testing-library/react';
import { Token } from '../Token';

describe('Token Component', () => {
  const defaultProps = {
    id: 'test-token',
    type: 'ally' as const,
    position: { x: 0, y: 0 },
    onMove: jest.fn(),
  };
  
  beforeEach(() => {
    jest.clearAllMocks();
  });
  
  it('renders token correctly', () => {
    render(<Token {...defaultProps} />);
    expect(screen.getByTestId('token-test-token')).toBeInTheDocument();
  });
  
  it('calls onMove when dragged', () => {
    render(<Token {...defaultProps} />);
    const token = screen.getByTestId('token-test-token');
    
    fireEvent.mouseDown(token, { clientX: 0, clientY: 0 });
    fireEvent.mouseMove(document, { clientX: 50, clientY: 50 });
    fireEvent.mouseUp(document);
    
    expect(defaultProps.onMove).toHaveBeenCalledWith({ x: 50, y: 50 });
  });
  
  it('applies correct CSS classes for token type', () => {
    render(<Token {...defaultProps} type="enemy" />);
    const token = screen.getByTestId('token-test-token');
    expect(token).toHaveClass('token--enemy');
  });
});
```

### Ejecutar Tests

```bash
# Todos los tests
npm test

# Tests en modo watch
npm test -- --watch

# Tests con coverage
npm test -- --coverage

# Test espec√≠fico
npm test -- Token.test.tsx
```

## üìö Documentaci√≥n

### JSDoc Comments

```typescript
/**
 * Calcula la distancia entre dos posiciones en la grilla
 * @param pos1 - Primera posici√≥n
 * @param pos2 - Segunda posici√≥n
 * @returns Distancia en casilleros
 * @example
 * ```typescript
 * const distance = calculateGridDistance(
 *   { x: 0, y: 0 }, 
 *   { x: 3, y: 4 }
 * ); // returns 5
 * ```
 */
const calculateGridDistance = (
  pos1: GridPosition, 
  pos2: GridPosition
): number => {
  const dx = pos2.x - pos1.x;
  const dy = pos2.y - pos1.y;
  return Math.sqrt(dx * dx + dy * dy);
};
```

### README Updates

Cuando agregues nuevas funcionalidades:

1. Actualiza la secci√≥n de caracter√≠sticas
2. Agrega ejemplos de uso si es necesario
3. Actualiza screenshots si hay cambios visuales
4. Documenta nuevas configuraciones

## üêõ Reportar Bugs

### Template de Bug Report

```markdown
## üêõ Descripci√≥n del Bug
Descripci√≥n clara y concisa del problema.

## üîÑ Pasos para Reproducir
1. Ve a '...'
2. Haz click en '...'
3. Despl√°zate hacia '...'
4. Ve el error

## ‚úÖ Comportamiento Esperado
Descripci√≥n de lo que esperabas que pasara.

## üì± Screenshots
Si es aplicable, agrega screenshots para explicar el problema.

## üñ•Ô∏è Informaci√≥n del Entorno
- OS: [e.g. Windows 10, macOS 12.0]
- Navegador: [e.g. Chrome 95, Firefox 94]
- Versi√≥n: [e.g. 1.2.0]

## üìù Contexto Adicional
Cualquier otra informaci√≥n relevante sobre el problema.
```

### Informaci√≥n √ötil para Bugs

- **Console errors**: Abre DevTools y copia errores de consola
- **Network issues**: Revisa la pesta√±a Network en DevTools
- **Reproducibilidad**: ¬øPasa siempre o solo a veces?
- **Datos de prueba**: ¬øQu√© tokens/configuraci√≥n estabas usando?

## ‚ú® Solicitar Features

### Template de Feature Request

```markdown
## üöÄ Descripci√≥n del Feature
Descripci√≥n clara y concisa de lo que quieres que se agregue.

## üéØ Problema que Resuelve
¬øQu√© problema resuelve este feature? ¬øPor qu√© es √∫til?

## üí° Soluci√≥n Propuesta
Descripci√≥n de c√≥mo te gustar√≠a que funcionara.

## üîÑ Alternativas Consideradas
¬øConsideraste otras soluciones? ¬øPor qu√© esta es mejor?

## üìù Contexto Adicional
Cualquier otra informaci√≥n, mockups, o ejemplos.
```

### Priorizaci√≥n de Features

**Alta Prioridad:**
- Mejoras de accesibilidad
- Fixes de performance cr√≠ticos
- Funcionalidades core de D&D

**Media Prioridad:**
- Mejoras de UX
- Nuevas herramientas de dibujo
- Integraciones con APIs

**Baja Prioridad:**
- Features experimentales
- Personalizaciones avanzadas
- Optimizaciones menores

## üéØ √Åreas que Necesitan Ayuda

### üî• High Priority
- **Accesibilidad**: ARIA labels, keyboard navigation
- **Testing**: Aumentar coverage de tests
- **Performance**: Optimizar renderizado de grilla grande
- **Mobile UX**: Mejorar experiencia t√°ctil

### üìã Medium Priority
- **Documentaci√≥n**: M√°s ejemplos y tutoriales
- **Internacionalizaci√≥n**: Soporte multi-idioma
- **Themes**: Sistema de temas personalizables
- **Export/Import**: Formatos adicionales

### üí° Ideas para Contribuir
- **Nuevos Status Effects**: M√°s efectos de estado
- **Sound Effects**: M√°s efectos de audio
- **Animations**: Animaciones de tokens
- **Templates**: Plantillas de mapas

## üèÜ Reconocimiento

Todos los contribuidores ser√°n reconocidos en:

- **README.md**: Lista de contribuidores
- **CHANGELOG.md**: Cr√©ditos por versi√≥n
- **About page**: En la aplicaci√≥n
- **GitHub**: Contributors page

### Tipos de Contribuci√≥n

- üêõ **Bug fixes**
- ‚ú® **Features**
- üìö **Documentation**
- üé® **Design**
- üí° **Ideas**
- üîç **Testing**
- üåç **Translation**
- üì¢ **Outreach**

## üìû Contacto y Soporte

- **GitHub Issues**: Para bugs y feature requests
- **GitHub Discussions**: Para preguntas y discusiones
- **Discord**: [Link al servidor] (si existe)
- **Email**: [email de contacto] (si aplica)

## üìÑ Licencia

Al contribuir, aceptas que tus contribuciones ser√°n licenciadas bajo la misma licencia que el proyecto (MIT License).

---

**¬°Gracias por contribuir al D&D Combat Grid! üé≤‚öîÔ∏è**

Tu ayuda hace que este proyecto sea mejor para toda la comunidad de D&D. ¬°Esperamos tus contribuciones!